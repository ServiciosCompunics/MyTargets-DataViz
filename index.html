<!DOCTYPE html>
<html>
  <head>
    <link  href="./dist/vis-timeline-graph2d.min.css" rel="stylesheet" type="text/css" />
    <script src="./dist/sql-wasm.js"></script>
    <script src="./dist/vis.min.js"></script>
    <script src="./dist/jquery.min.js"> </script>
    <script src="./dist/chart.umd.min.js"> </script>
    <script type="module" src="./dataviz.js"></script>
    <script type="text/javascript">
      var TrefferChart = null;
      function setColor(score){
        if( score < 3 || score > 8) return 'rgba(0,0,0,1.0)';
        return 'rgba(255,255,255,1.0)';
      };
      function showTrefferBild(x,y,r) {
        var schuss = [];
        var scolor = [];
        for( let i=0; i < x.length; i++) {
          schuss.push( { x: 1.9*x[i], y: -1.9*y[i], r: 5, } );
          scolor.push( setColor(r[i]), );
        }

        const data = {
          datasets: [{
            data: schuss,
            backgroundColor: scolor,
          }]
        };

        // config 
        const config = {
          type: 'bubble',
          data,
          options: {
            plugins: {
              responsive: false,
              layout: {autoPadding: false},
              maintainAspectRatio: false,
              legend: {display: false},
              title: {
                display: true,
                text: "Trefferbild"
              },
              scales: {
                x: { position: "center", display: false, min: -2.0, max: 2.0, grid: false },
                y: { position: "center", display: false, min: -2.0, max: 2.0, grid: false },
              },
            },
          }
        };

        // draw TrefferBild Chart
        var myWindow = window.open("", "", "toolbar=no,scrollbars=yes,resizable=no,top=300px,left=300px,width=600px,height=600px"); 
        if( TrefferChart ){ TrefferChart.destroy(); }
        var TrefferCanvas = myWindow.document.createElement("canvas");
        TrefferCanvas.id = "TrefferBildCanvas";
        TrefferCanvas.width = 600;
        TrefferCanvas.height = 600;
        TrefferCanvas.style.backgroundImage = "url(./img/fita-40-600x600.png)";
        TrefferCanvas.style.backgroundRepeat = "no-repeat";
        TrefferCanvas.style.backgroundPosition = "center";
        TrefferCanvas.style.backgroundSize = "contain";
        TrefferCanvas.style.zIndex = 1000;
        TrefferCanvas.style.position = "absolute";
        TrefferCanvas.style.margin = "0px";
        TrefferCanvas.style.border = "0px";
        TrefferCanvas.style.adding = "0px";
        var TrefferBody = myWindow.document.getElementsByTagName("body")[0];
        TrefferBody.appendChild(TrefferCanvas);
        TrefferChart = new Chart( myWindow.document.getElementById('TrefferBildCanvas'), config );
      };
    </script>

    <style type="text/css">
     #menu {
       position: absolute;
       top: 0px;
       left: 0px;
       margin: 8px;
       z-index: 9999;
     }
     #timeline {
       position:relative;
       top: 30px;
       width: 100%;
       height: 20vH;
     }
     #rundenInfoD {
       position:relative;
       width: auto;
       height: 500px;
       overflow:scroll;
     }
     #rundenGraphD {
       position:absolute;
       left: 0px;
       width: 70%;
       height: 500px;
       overflow:auto;
     }
     #rundenInfo {
       position:absolute;
       right: 0px;
       width: 30%;
       height: 500px;
       overflow:scroll;
     }
     #passeInfo {
       position:relative;
       left: 0px;
       width: 100%;
       height: 500px;
       overflow:scroll;
     }
    .vis-item {
     background-color: #ffffff;
     border-color: #000000;
     color: #000000;
     font-family: DejaVu Sans;
     font-size: 11px;
     font-weight: normal;
    }
    .vis-item.vis-selected {
     background-color: #b4b4b4;
     border-color: #000000;
     color: #000000;
     font-family: Arial;
     font-size: 14px;
     font-weight: normal;
    }
    .vis-time-axis .vis-text {
     font-family: DejaVu Sans;
     color: #000000;
     font-size: 12px;		
     font-weight: normal;
    }
    .vis-timeline.vis-bottom {
     border-style: none;
     width: 100%;
     height: 100px;
    }
    .ChartTable, th, td {
     border-collapse: collapse;
     border: 1px solid black;
     padding: 10px;
    }
    </style>
  </head>
  <body>
    <div id="menu">
      <input type="button" id="zoomIn"    value="Zoom in"/>
      <input type="button" id="zoomOut"   value="Zoom out"/>
      <input type="button" id="moveLeft"  value="Zur&uuml;ck"/>
      <input type="button" id="moveRight" value="Vorw&auml;rts"/>
      <select id="selLocation">   <option value="">Ort</option></select>
      <select id="selDistance">   <option value="">Distanz</option></select>
      <select id="selBow">        <option value="">Bogen</option></select>
    </div>
    <div    id="timeline"></div>
    <div    id="rundenInfoD">
    <div    id="rundenGraphD"><canvas id='rundenGraph'></canvas></div>
    <div    id="rundenInfo"></div>
    </div>
    <div    id="passeInfo"></div>
  </body>
</html>
